
## [原文](https://zhuanlan.zhihu.com/p/21423208)


# 反射简介及其特点 
 
 
Java的反射机制允许我们动态的调用某个对象的方法/构造函数、获取某个对象的属性等，而无需在编码时确定调用的对象。
这种机制在我们常用的框架中也非常常见。

## 什么是反射？

反射是一种能够在程序运行时动态访问、修改某个类中任意属性（状态）和方法（行为）的机制（包括private实例和方法），
java反射机制提供了以下几个功能：

- 在运行时判断任意一个对象所属的类；

- 在运行时构造任意一个类的对象；

- 在运行时判断任意一个类所具有的成员变量和方法；

- 在运行时调用任意一个对象的方法。

## 反射涉及到四个核心类：

- java.lang.Class.java：类对象；

- java.lang.reflect.Constructor.java：类的构造器对象；

- java.lang.reflect.Method.java：类的方法对象；

- java.lang.reflect.Field.java：类的属性对象；

## 例子

```java
Class actionClass=Class.forName(“MyClass”);
Object action=actionClass.newInstance();
Method method = actionClass.getMethod(“myMethod”,null);
method.invoke(action,null);

```
上面就是最常见的反射使用的例子，前两行实现了类的装载、链接和初始化（newInstance方法实际上也是使用反射调用了<init>方法），
后两行实现了从class对象中获取到method对象然后执行反射调用

## 反射有什么用？

操作因访问权限限制的属性和方法；

实现自定义注解；

动态加载第三方jar包，解决android开发中方法数不能超过65536个的问题；

按需加载类，节省编译和初始化APK的时间；



## 反射的特点

## 优点
灵活、自由度高：不受类的访问权限限制，想对类做啥就做啥；

## 缺点

性能问题：通过反射访问、修改类的属性和方法时会远慢于直接操作，
但性能问题的严重程度取决于在程序中是如何使用反射的。
如果使用得很少，不是很频繁，性能将不会是什么问题；

安全性问题：反射可以随意访问和修改类的所有状态和行为，破坏了类的封装性，
如果不熟悉被反射类的实现原理，随意修改可能导致潜在的逻辑问题；

兼容性问题：因为反射会涉及到直接访问类的方法名和实例名，
不同版本的API如果有变动，反射时找不到对应的属性和方法时会报异常；

## 说明
通过反射访问方法比实例慢很多；

有用到反射的类不能被混淆；

反射存在性能问题，但使用不频繁、按需使用时，对程序性能影响并不大；

反射存在安全性问题，因为可以随意修改类的所有状态和行为（包括private方法和实例）；

使用反射访问Android的API时需要注意因为不同API版本导致的兼容性问题；


