

# 上下文切换的性能消耗在哪里呢？

 
context switch过高，会导致CPU像个搬运工，频繁在寄存器和运行队列直接奔波  ，
更多的时间花在了线程切换，而不是真正工作的线程上。直接的消耗包括CPU寄存器需要保存和加载，
系统调度器的代码需要执行。间接消耗在于多核cache之间的共享数据。

## 上下文切换的消耗

上下文切换通常是计算密集型的。也就是说，它需要相当可观的处理器时间，在每秒几十上百次的切换中，
每次切换都需要纳秒量级的时间。所以，上下文切换对系统来说意味着消耗大量的 CPU 时间，事实上，
可能是操作系统中时间消耗最大的操作。

Linux相比与其他操作系统（包括其他类 Unix 系统）有很多的优点，其中有一项就是，
其上下文切换和模式切换的时间消耗非常少。
